(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{3010:(e,t,n)=>{Promise.resolve().then(n.bind(n,9493))},9493:(e,t,n)=>{"use strict";n.d(t,{SailingCalculator:()=>R});var r=n(5155),a=n(2115),s=n(5411),i=n.n(s);function o(e){let{waypoints:t,onAddWaypoint:n,onUpdateWaypoint:s,onRemoveWaypoint:o,marinas:l,selectedWaypointMarinas:c}=e,d=(0,a.useRef)(null),u=(0,a.useRef)(null),m=(0,a.useRef)(new Map),[p,x]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[g,y]=(0,a.useState)(!0),v=(0,a.useRef)(!1),b=(0,a.useRef)(null),j=(0,a.useRef)(new Map),w=(0,a.useRef)(new Set),N=(0,a.useRef)(t),C=(0,a.useRef)(0);(0,a.useEffect)(()=>{N.current=t},[t]),(0,a.useEffect)(()=>{try{let e="pk.eyJ1IjoiYWxvbmdzaWRleWFjaHRzIiwiYSI6ImNtZG9wZjQxeTAzcnMybXM5OTZ1NHJ1ZGYifQ.p-EJW0oDtDlpdaFxhq14yA";if(!e)return void h("Mapbox token not found. Please check your environment variables.");x(e)}catch(e){h("Failed to initialize map configuration")}},[]);let k=(0,a.useCallback)(()=>{let e=Date.now();e-C.current<100||(C.current=e,b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{if(!u.current)return;let e=N.current;if(e.length<2)return;let t=e.map(e=>[e.lng,e.lat]),n=new(i()).LngLatBounds;t.forEach(e=>n.extend(e)),u.current.fitBounds(n,{padding:{top:100,bottom:100,left:100,right:100},maxZoom:8,duration:2500,easing:e=>e*(2-e)})},1e3))},[]),S=(0,a.useCallback)(e=>{try{var t;let n=null==(t=u.current)?void 0:t.queryRenderedFeatures(e);if(!n)return!1;return n.some(e=>"water"===e.sourceLayer)}catch(e){return!1}},[]),M=(0,a.useCallback)(()=>{if(!u.current||!v.current||t.length<2)return;let e=t.map(e=>[e.lng,e.lat]);try{u.current.getSource("route")&&u.current.getSource("route").setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}})}catch(e){}},[t]),E=(0,a.useCallback)(()=>{var e,n;if(u.current&&v.current){if(m.current.forEach(e=>e.remove()),m.current.clear(),t.forEach((e,t)=>{let n=document.createElement("div");n.className="waypoint-marker",n.setAttribute("role","button"),n.setAttribute("tabindex","0"),n.setAttribute("aria-label","Waypoint ".concat(t+1," at ").concat(e.lat.toFixed(4),", ").concat(e.lng.toFixed(4),". Press Enter to remove or drag to move.")),n.style.cssText="\n        width: 40px;\n        height: 40px;\n        border-radius: 50%;\n        background: #221896;\n        border: 3px solid #f4f4f4;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #f4f4f4;\n        font-weight: bold;\n        font-size: 14px;\n        box-shadow: 0 4px 8px rgba(34, 24, 150, 0.4);\n        z-index: 1000;\n        position: absolute;\n        outline: none;\n        transform: translate(-50%, -50%);\n      ";let r=()=>{n.style.background="#dc2626",n.style.boxShadow="0 6px 12px rgba(220, 38, 38, 0.4)",n.style.backgroundImage="url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='5,9 2,12 5,15'/%3E%3Cpolyline points='9,5 12,2 15,5'/%3E%3Cpolyline points='15,19 12,22 9,19'/%3E%3Cpolyline points='19,9 22,12 19,15'/%3E%3Cline x1='2' y1='12' x2='22' y2='12'/%3E%3Cline x1='12' y1='2' x2='12' y2='22'/%3E%3C/svg%3E\")",n.style.backgroundSize="16px 16px",n.style.backgroundPosition="center",n.style.backgroundRepeat="no-repeat",n.textContent=""},a=()=>{n.style.background="#221896",n.style.boxShadow="0 4px 8px rgba(34, 24, 150, 0.4)",n.style.backgroundImage="",n.textContent=(t+1).toString()};n.addEventListener("mouseenter",r),n.addEventListener("mouseleave",a),n.addEventListener("focus",r),n.addEventListener("blur",a),n.textContent=(t+1).toString();let l=n=>{if(n.stopPropagation(),!j.current.has(e.id)&&!w.current.has(e.id)){o(e.id);let n=document.createElement("div");n.setAttribute("aria-live","polite"),n.textContent="Waypoint ".concat(t+1," removed"),n.style.position="absolute",n.style.left="-10000px",document.body.appendChild(n),setTimeout(()=>document.body.removeChild(n),1e3)}};n.addEventListener("click",l),n.addEventListener("keydown",e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l(e))});let c=new(i()).Marker({element:n,draggable:!0,anchor:"center"});requestAnimationFrame(()=>{c.setLngLat([e.lng,e.lat]).addTo(u.current)}),c.on("dragstart",()=>{let r=c.getLngLat();j.current.set(e.id,r),n.style.boxShadow="0 8px 16px rgba(34, 24, 150, 0.6)",n.style.zIndex="2000",n.setAttribute("aria-label","Dragging waypoint ".concat(t+1,". Drop on water to move, or on land to cancel."))}),c.on("drag",()=>{let e=c.getLngLat();S(u.current.project(e))?(n.style.background="#3be856",n.style.borderColor="#f4f4f4"):(n.style.background="#dc2626",n.style.borderColor="#040f0b")}),c.on("dragend",()=>{let r=c.getLngLat(),a=j.current.get(e.id);n.style.boxShadow="0 4px 8px rgba(34, 24, 150, 0.4)",n.style.zIndex="1000",n.style.background="#221896",n.style.borderColor="#f4f4f4",n.setAttribute("aria-label","Waypoint ".concat(t+1," at ").concat(e.lat.toFixed(4),", ").concat(e.lng.toFixed(4),". Press Enter to remove or drag to move.")),S(u.current.project(r))?s(e.id,r.lng,r.lat):a&&(c.setLngLat(a),setTimeout(()=>{M()},200)),j.current.delete(e.id),w.current.add(e.id),setTimeout(()=>{w.current.delete(e.id)},200)});let d=new(i()).Popup({offset:25,className:"waypoint-popup"}).setHTML('\n        <div role="dialog" aria-label="Waypoint information">\n          <h3 class="font-semibold">'.concat(e.name,'</h3>\n          <p class="text-sm text-muted-foreground">\n            ').concat(e.lat.toFixed(6),", ").concat(e.lng.toFixed(6),'\n          </p>\n          <p class="text-xs text-muted-foreground mt-1">\n            Click or press Enter to remove\n          </p>\n        </div>\n      '));c.setPopup(d),m.current.set(e.id,c)}),t.length>1){let e=t.map(e=>[e.lng,e.lat]);try{u.current.getSource("route")?u.current.getSource("route").setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}):(u.current.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}}),u.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#221896","line-width":4,"line-dasharray":[1,2],"line-opacity":.9}}))}catch(e){}}else if(null==(e=(n=u.current).getLayer)?void 0:e.call(n,"route"))try{u.current.removeLayer("route"),u.current.removeSource("route")}catch(e){}k()}},[t,s,o,S,k]);return((0,a.useEffect)(()=>{if(!d.current||!p||"YOUR_MAPBOX_TOKEN_HERE"===p)return void y(!1);try{i().accessToken=p,u.current=new(i()).Map({container:d.current,style:"mapbox://styles/alongsideyachts/cley4k7w8000o01o63hs1c6c5",center:[-74.5,40],zoom:2,maxZoom:9.6,projection:{name:"mercator"},dragRotate:!1,touchZoomRotate:!1,attributionControl:!1}),u.current.addControl(new(i()).NavigationControl({showCompass:!1,visualizePitch:!1}),"top-right");let e=()=>{if(u.current&&d.current)try{let e=d.current.closest(".map-container");e&&e.removeAttribute("style"),d.current.removeAttribute("style");let t=d.current.querySelector(".mapboxgl-canvas");t&&t.removeAttribute("style"),e&&e.offsetHeight,d.current.offsetHeight;let n=(e||d.current).getBoundingClientRect(),r="".concat(n.width,"px"),a="".concat(n.height,"px");e&&(e.style.width=r,e.style.height=a),d.current.style.width=r,d.current.style.height=a,t&&(t.style.width=r,t.style.height=a),u.current.resize()}catch(e){}};return window.addEventListener("resize",e),u.current.on("style.load",()=>{var e,r,a,s,i,o;v.current=!0,y(!1),null==(e=u.current)||e.on("mousemove",e=>{var t;k();let n=null==(t=u.current)?void 0:t.getCanvas();if(n)try{let t=document.elementsFromPoint(e.point.x,e.point.y).some(e=>e.classList.contains("waypoint-marker")),r=j.current.size>0;t?n.style.cursor="pointer":S(e.point)?n.style.cursor=r?"grabbing":"crosshair":n.style.cursor="not-allowed"}catch(e){n.style.cursor="default"}}),null==(r=u.current)||r.on("click",e=>{k(),S(e.point)&&n(e.lngLat.lng,e.lngLat.lat)}),null==(a=u.current)||a.on("drag",k),null==(s=u.current)||s.on("zoom",k),null==(i=u.current)||i.on("pitch",k),null==(o=u.current)||o.on("rotate",k),t.length>0&&E()}),()=>{var t;v.current=!1,y(!1),b.current&&clearTimeout(b.current),window.removeEventListener("resize",e),m.current.forEach(e=>e.remove()),m.current.clear(),null==(t=u.current)||t.remove()}}catch(e){h("Failed to initialize map. Please check your connection and try again."),y(!1)}},[p,n,S,k]),(0,a.useEffect)(()=>{v.current&&E()},[E]),f)?(0,r.jsx)("div",{className:"h-[600px] bg-muted rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Map Error"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:f})]})}):p&&"YOUR_MAPBOX_TOKEN_HERE"!==p?(0,r.jsxs)("div",{className:"relative",style:{height:"100%"},role:"application","aria-label":"Interactive sailing route map",children:[g&&(0,r.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})}),(0,r.jsx)("div",{ref:d,className:"w-full shadow-lg focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 overflow-hidden",style:{position:"relative",height:"100%",borderRadius:"1rem"},tabIndex:0,role:"img","aria-label":"Sailing route map. Use Tab to navigate to waypoints, click on water to add new waypoints."}),(0,r.jsx)("style",{children:"\n        .mapboxgl-map {\n          width: 100% !important;\n          height: 100% !important;\n          pointer-events: auto !important;\n        }\n        .mapboxgl-canvas-container {\n          position: absolute !important;\n          top: 0 !important;\n          left: 0 !important;\n          width: 100% !important;\n          height: 100% !important;\n          pointer-events: auto !important;\n        }\n        .mapboxgl-canvas {\n          position: absolute !important;\n          top: 0 !important;\n          left: 0 !important;\n          pointer-events: auto !important;\n        }\n        .waypoint-marker {\n          pointer-events: auto !important;\n        }\n        .waypoint-marker:focus {\n          outline: 2px solid #221896;\n          outline-offset: 2px;\n        }\n        .waypoint-popup {\n          font-family: inherit;\n        }\n        @media (prefers-reduced-motion: reduce) {\n          .waypoint-marker {\n            transition: none !important;\n          }\n        }\n      "}),0===t.length&&(0,r.jsx)("div",{className:"absolute top-4 left-4 bg-card p-4 rounded-lg shadow-md border",role:"status","aria-live":"polite",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click on the map to add waypoints and create your sailing route"})}),(0,r.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:t.length>0&&"Route has ".concat(t.length," waypoint").concat(1===t.length?"":"s")})]}):(0,r.jsx)("div",{className:"h-[600px] bg-muted rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Mapbox Token Required"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Please provide your Mapbox API token to use the map functionality."})]})})}var l=n(2596),c=n(9688);function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,c.QP)((0,l.$)(t))}let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",n),...a})});u.displayName="Card";let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",n),...a})});m.displayName="CardHeader";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h3",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",n),...a})});p.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,className:d("text-sm text-muted-foreground",n),...a})}).displayName="CardDescription";let x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("p-6 pt-0",n),...a})});x.displayName="CardContent",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",n),...a})}).displayName="CardFooter";var f=n(968),h=n(2085);let g=(0,h.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(f.b,{ref:t,className:d(g(),n),...a})});y.displayName=f.b.displayName;let v=a.forwardRef((e,t)=>{let{className:n,type:a,...s}=e;return(0,r.jsx)("input",{type:a,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...s})});v.displayName="Input";var b=n(9708);let j=(0,h.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=a.forwardRef((e,t)=>{let{className:n,variant:a,size:s,asChild:i=!1,...o}=e,l=i?b.DX:"button";return(0,r.jsx)(l,{className:d(j({variant:a,size:s,className:n})),ref:t,...o})});function N(e){let{settings:t,onSettingsChange:n}=e,a=(e,r)=>{n({...t,[e]:r})},s=e=>{if(e===t.units)return;let r={...t,units:e};"metric"===e?(r.vesselSpeed=Math.round(1.85*t.vesselSpeed*10)/10,r.fuelConsumption=Math.round(3.75*t.fuelConsumption*10)/10,r.fuelPrice=Math.round(t.fuelPrice/3.75*100)/100):(r.vesselSpeed=Math.round(t.vesselSpeed/1.85*10)/10,r.fuelConsumption=Math.round(t.fuelConsumption/3.75*10)/10,r.fuelPrice=Math.round(3.75*t.fuelPrice*100)/100),n(r)};return(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{children:(0,r.jsx)(p,{children:"Vessel Settings"})}),(0,r.jsxs)(x,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(y,{children:"Units"}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(w,{variant:"imperial"===t.units?"default":"outline",size:"sm",onClick:()=>s("imperial"),className:"imperial"===t.units?".-active":"",children:"Imperial"}),(0,r.jsx)(w,{variant:"metric"===t.units?"default":"outline",size:"sm",onClick:()=>s("metric"),className:"metric"===t.units?".-active":"",children:"Metric"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(y,{htmlFor:"speed",children:["Vessel Speed (","imperial"===t.units?"knots":"km/h",")"]}),(0,r.jsx)(v,{id:"speed",type:"number",min:"1",max:"50",value:t.vesselSpeed,onChange:e=>a("vesselSpeed",Number(e.target.value))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(y,{htmlFor:"consumption",children:["Fuel Consumption (","imperial"===t.units?"gal/h":"L/h",")"]}),(0,r.jsx)(v,{id:"consumption",type:"number",min:"0.1",step:"0.1",value:t.fuelConsumption,onChange:e=>a("fuelConsumption",Number(e.target.value))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(y,{htmlFor:"price",children:["Fuel Price (per ","imperial"===t.units?"gallon":"liter",")"]}),(0,r.jsx)(v,{id:"price",type:"number",min:"0.1",step:"0.1",value:t.fuelPrice,onChange:e=>a("fuelPrice",Number(e.target.value))})]})]})]})}w.displayName="Button";let C=(0,h.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function k(e){let{className:t,variant:n,...a}=e;return(0,r.jsx)("div",{className:d(C({variant:n}),t),...a})}var S=n(2412);function M(e){return Math.PI/180*e}function E(e){let{waypoints:t,settings:n,onRemoveWaypoint:a,onClearRoute:s,selectedWaypointMarinas:i}=e,o=function(e,t){if(e.length<2)return{segments:[],totalDistance:0,totalTime:0,totalFuel:0,totalCost:0};let n=[],r=0;for(let a=0;a<e.length-1;a++){let s=e[a],i=e[a+1],o=function(e,t,n,r){let a=M(n-e),s=M(r-t),i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(M(e))*Math.cos(M(n))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*3440.065}(s.lat,s.lng,i.lat,i.lng);"metric"===t.units&&(o*=1.852);let l=function(e,t,n,r){let a=M(r-t);return(180/Math.PI*Math.atan2(Math.sin(a)*Math.cos(M(n)),Math.cos(M(e))*Math.sin(M(n))-Math.sin(M(e))*Math.cos(M(n))*Math.cos(a))+360)%360}(s.lat,s.lng,i.lat,i.lng);n.push({from:s,to:i,distance:o,bearing:l}),r+=o}let a=r/t.vesselSpeed,s=a*t.fuelConsumption,i=s*t.fuelPrice;return{segments:n,totalDistance:r,totalTime:a,totalFuel:s,totalCost:i}}(t,n),l=e=>{let t=Math.ceil(e).toString();if(t.length<=3)return t;if(t.length<=6)return t.replace(/\B(?=(\d{3})+(?!\d))/g,",");if(t.length<=9){let e=t.slice(0,-6),n=t.slice(-6,-3),r=t.slice(-3);return"".concat(e,",").concat(n," ").concat(r)}{let e=t.slice(0,-9),n=t.slice(-9,-6),r=t.slice(-6,-3),a=t.slice(-3);return"".concat(e,",").concat(n,",").concat(r," ").concat(a)}};if(0===t.length)return(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{children:(0,r.jsx)(p,{children:"Route Details"})}),(0,r.jsx)(x,{children:(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Add waypoints to the map to see route calculations"})})]});if(1===t.length)return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{children:(0,r.jsx)(p,{children:"Route Details"})}),(0,r.jsx)(x,{children:(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Add at least 2 waypoints to see route summary"})})]}),(0,r.jsxs)(u,{children:[(0,r.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(p,{children:"Waypoints"}),(0,r.jsx)(w,{variant:"outline",size:"sm",onClick:s,children:"Clear Route"})]}),(0,r.jsx)(x,{className:"space-y-3",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(k,{variant:"secondary",children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.lat.toFixed(4),", ",e.lng.toFixed(4)]})]})]}),(0,r.jsx)(w,{variant:"ghost",size:"sm",onClick:()=>a(e.id),children:(0,r.jsx)(S.A,{className:"h-4 w-4"})})]},e.id))})]})]});let c="imperial"===n.units?"nm":"km",d="imperial"===n.units?"gal":"L";return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{children:(0,r.jsx)(p,{children:"Route Summary"})}),(0,r.jsx)(x,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Total Distance"}),(0,r.jsxs)("div",{className:"text-muted-foreground",children:[l(o.totalDistance)," ",c]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Total Time"}),(0,r.jsx)("div",{className:"text-muted-foreground",children:o.totalTime>=24?"".concat(Math.floor(o.totalTime/24),"d ").concat(Math.floor(o.totalTime%24),"h"):"".concat(Math.floor(o.totalTime),"h")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Fuel Needed"}),(0,r.jsxs)("div",{className:"text-muted-foreground",children:[l(o.totalFuel)," ",d]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Total Cost"}),(0,r.jsxs)("div",{className:"text-muted-foreground",children:["$",l(o.totalCost)]})]})]})})]}),(0,r.jsxs)(u,{children:[(0,r.jsxs)(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(p,{children:"Waypoints"}),(0,r.jsx)(w,{variant:"outline",size:"sm",onClick:s,children:"Clear Route"})]}),(0,r.jsx)(x,{className:"space-y-3",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(k,{variant:"secondary",children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.lat.toFixed(4),", ",e.lng.toFixed(4)]})]})]}),(0,r.jsx)(w,{variant:"ghost",size:"sm",onClick:()=>a(e.id),children:(0,r.jsx)(S.A,{className:"h-4 w-4"})})]},e.id))})]}),o.segments.length>0&&(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{children:(0,r.jsx)(p,{children:"Route Segments"})}),(0,r.jsx)(x,{className:"space-y-2",children:o.segments.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between text-sm p-2 border rounded",children:[(0,r.jsxs)("span",{children:["Segment ",t+1]}),(0,r.jsxs)("span",{children:[e.distance.toFixed(1)," ",c]})]},t))})]})]})}function R(){let e="sailing_calculator_waypoints",t="sailing_calculator_settings",n=(e,t)=>{try{let n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.warn("Failed to load ".concat(e," from localStorage:"),n),t}},s=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(t){console.warn("Failed to save ".concat(e," to localStorage:"),t)}},[i,l]=(0,a.useState)([]),[c,d]=(0,a.useState)({vesselSpeed:6,fuelConsumption:100,fuelPrice:5.5,units:"imperial"}),[u,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)([]),[f,h]=(0,a.useState)({});(0,a.useEffect)(()=>{m(!0),l(n(e,[])),d(n(t,{vesselSpeed:6,fuelConsumption:100,fuelPrice:5.5,units:"imperial"}))},[]),(0,a.useEffect)(()=>{u&&s(e,i)},[i,u]),(0,a.useEffect)(()=>{u&&s(t,c)},[c,u]);let g=(0,a.useCallback)((e,t)=>{l(n=>{let r={id:Date.now(),lng:e,lat:t,name:"Waypoint ".concat(n.length+1)};return[...n,r]})},[]),y=(0,a.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e)),h(t=>{let n={...t};return delete n[e],n})},[]),v=(0,a.useCallback)((e,t,n)=>{l(r=>r.map(r=>r.id===e?{...r,lng:t,lat:n}:r))},[]),b=(0,a.useCallback)(()=>{l([]),h({})},[]);return(0,r.jsxs)("div",{className:"flex flex-col h-screen p-6 space-y-6","data-component-path":"components/sailing/SailingCalculator.tsx",children:[(0,r.jsxs)("div",{className:"text-center space-y-4 flex-shrink-0",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"Sailing Distance Calculator"}),(0,r.jsx)("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Plan your sailing route, calculate distances, and find nearby marinas. Click on the map to add waypoints and create your sailing route."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 flex-1 min-h-0",children:[(0,r.jsx)("div",{className:"lg:col-span-3 map-container rounded-[1rem]","data-lov-id":"components/sailing/SailingCalculator.tsx:61:8",ref:e=>{if(e){let t=e.getBoundingClientRect();e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px")}},children:(0,r.jsx)(o,{waypoints:i,onAddWaypoint:g,onUpdateWaypoint:v,onRemoveWaypoint:y,marinas:p,selectedWaypointMarinas:f})}),(0,r.jsxs)("div",{className:"space-y-6 overflow-scroll",children:[(0,r.jsx)(N,{settings:c,onSettingsChange:d}),(0,r.jsx)(E,{waypoints:i,settings:c,onRemoveWaypoint:y,onClearRoute:b,selectedWaypointMarinas:f})]})]})]})}}}]);